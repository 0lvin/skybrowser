diff --git a/gtkhtml/htmlengine.c b/gtkhtml/htmlengine.c
index 833f6fe..992069a 100644
--- a/gtkhtml/htmlengine.c
+++ b/gtkhtml/htmlengine.c
@@ -101,9 +101,6 @@
 #include "htmlstyle.h"
 
 /* #define CHECK_CURSOR */
-#ifdef CHECK_CURSOR
-#include <libgnomeui/gnome-dialog-util.h>
-#endif
 
 static void      html_engine_class_init       (HTMLEngineClass     *klass);
 static void      html_engine_init             (HTMLEngine          *engine);
@@ -5834,14 +5831,22 @@ check_cursor (HTMLEngine *e)
 		;
 
 	if (cursor->position != 0) {
+		GtkWidget *dialog;
 		g_warning ("check cursor failed (%d)\n", cursor->position);
-		gnome_ok_dialog ("Eeek, BAD cursor position!\n"
+		dialog = gtk_message_dialog_new (NULL,
+		GTK_DIALOG_MODAL,
+		GTK_MESSAGE_INFO,
+		GTK_BUTTONS_OK,
+		"Eeek, BAD cursor position!\n"
 				 "\n"
 				 "If you know how to get editor to this state,\n"
 				 "please mail to gtkhtml-maintainers@ximian.com\n"
 				 "detailed description\n"
 				 "\n"
-				 "Thank you");
+				 "Thank you"
+		);
+		gtk_dialog_run (GTK_DIALOG (dialog));
+		gtk_widget_destroy (dialog);
 		e->cursor->position -= cursor->position;
 	}
 
diff --git a/gtkhtml/test.c b/gtkhtml/test.c
index f39a3e7..5679594 100644
--- a/gtkhtml/test.c
+++ b/gtkhtml/test.c
@@ -31,7 +31,6 @@
 
 #include <gtk/gtk.h>
 #include <glib/gi18n.h>
-#include <libgnomeui/gnome-ui-init.h>
 
 #include "gtkhtml.h"
 #include "gtkhtmldebug.h"
@@ -322,7 +321,7 @@ main (int argc, char **argv)
 	GtkWidget *action_button;
 	int i = 0;
 
-	gnome_program_init ("libgtkhtml test", "0.0", LIBGNOMEUI_MODULE, argc, argv, NULL);
+	gtk_init(&argc, &argv);
 
 	find_examples ();
 
diff --git a/gtkhtml/testgtkhtml.c b/gtkhtml/testgtkhtml.c
index ea7e9b1..a831c12 100644
--- a/gtkhtml/testgtkhtml.c
+++ b/gtkhtml/testgtkhtml.c
@@ -99,6 +99,7 @@ static GtkHTMLStream *html_stream_handle = NULL;
 static GtkWidget *entry;
 static GtkWidget *popup_menu, *popup_menu_back, *popup_menu_forward, *popup_menu_home;
 static GtkWidget *toolbar_back, *toolbar_forward;
+static GtkWidget *statusbar;
 static HTMLURL *baseURL = NULL;
 
 static GList *go_list;
@@ -599,16 +600,27 @@ on_submit (GtkHTML *html, const gchar *method, const gchar *action, const gchar
 }
 
 static void
-on_url (GtkHTML *html, const gchar *url, gpointer data)
+change_status_bar(GtkStatusbar * statusbar, const gchar* text)
 {
-	GnomeApp *app;
+	gchar *msg;
+  
+	if (text == NULL)
+		msg = g_strdup ("");
+	else
+		msg = g_strdup (text);
 
-	app = GNOME_APP (data);
+	gtk_statusbar_pop (statusbar, 0); /* clear any previous message, 
+				     * underflow is allowed 
+				     */
+	gtk_statusbar_push (statusbar, 0, msg);
 
-	if (url == NULL)
-		gnome_appbar_set_status (GNOME_APPBAR (app->statusbar), "");
-	else
-		gnome_appbar_set_status (GNOME_APPBAR (app->statusbar), url);
+	g_free (msg);
+}
+
+static void
+on_url (GtkHTML *html, const gchar *url, gpointer data)
+{
+	change_status_bar (GTK_STATUSBAR(statusbar), url);
 }
 
 static void
@@ -988,23 +1000,17 @@ static gboolean
 motion_notify_event (GtkHTML *html, GdkEventMotion *event, gpointer data)
 {
 	const char *id;
-	GnomeApp *app;
-
-	app = GNOME_APP (data);
-
+	
 	id = gtk_html_get_object_id_at (html, event->x, event->y);
-	if (id)
-		gnome_appbar_set_status (GNOME_APPBAR (app->statusbar), id);
-	else
-		gnome_appbar_set_status (GNOME_APPBAR (app->statusbar), "");
-
+	change_status_bar(GTK_STATUSBAR (statusbar), id);
+	
 	return FALSE;
 }
 
 gint
 main (gint argc, gchar *argv[])
 {
-	GtkWidget *app, *bar, *main_table;
+	GtkWidget *app, *main_table;
 	GtkWidget *html_widget;
 	GtkWidget *scrolled_window;
 
@@ -1022,8 +1028,6 @@ main (gint argc, gchar *argv[])
 
 	g_signal_connect (app, "delete_event", G_CALLBACK (exit_cb), NULL);
 
-	bar = gnome_appbar_new (FALSE, TRUE, GNOME_PREFERENCES_USER);
-	gnome_app_set_statusbar (GNOME_APP (app), bar);
 	gnome_app_create_menus (GNOME_APP (app), main_menu);
 
 	/* Disable back and forward on the Go menu */
@@ -1038,8 +1042,18 @@ main (gint argc, gchar *argv[])
 					GTK_POLICY_AUTOMATIC,
 					GTK_POLICY_AUTOMATIC);
 					
-	main_table = gtk_table_new (1, 2, FALSE);
+	statusbar = gtk_statusbar_new ();
+					
+	main_table = gtk_table_new (1, 3, FALSE);
 	gnome_app_set_contents (GNOME_APP (app), main_table);
+	
+	gtk_table_attach (GTK_TABLE (main_table),
+                        statusbar,
+                        /* X direction */       /* Y direction */
+                        0, 1,                   2, 3,
+                        GTK_EXPAND | GTK_FILL,  GTK_SHRINK,
+                        0,                      0);
+
 	gtk_table_attach (GTK_TABLE (main_table),
                         scrolled_window,
                         /* X direction */       /* Y direction */
@@ -1052,7 +1066,7 @@ main (gint argc, gchar *argv[])
                         0, 1,                   0, 1,
                         GTK_EXPAND | GTK_FILL,  GTK_SHRINK,
                         0,                      0);
-
+	
 	session = soup_session_async_new ();
 
 	html_widget = gtk_html_new ();
